<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Online White Board</title>
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <link rel="stylesheet" href="./style/styles.css">
  <link rel="stylesheet" href="./style/modal.css">
  <link rel="stylesheet" href="./style/canvas.css">
  <link rel="stylesheet" href="./style/tooltip.css">
</head>
<body>
  <input type="radio" id="id-text" class="hide" name="tool">
  <div>
    <ul class="noselect">
      <!-- 颜色选择 -->
      <li class="dropdown">
        <input type="radio" id="id-color" class="hide" name="tool">
        <label for="id-color" class="dropbtn">
          <i id="id-color-icon" class="fas fa-paint-brush fa-2x"></i>
        </label>
        <div class="dropdown-content">
          <div class="dropdown-content-item">
            <label for="">颜色</label>
            <input type="radio" class="black" name="color" value="black" checked>
            <input type="radio" class="red" name="color" value="red">
            <input type="radio" class="yellow" name="color" value="yellow">
          </div>
          <div class="dropdown-content-item">
            <input id="id-color-picker" type="color" value= '#ff0000'>
          </div>
        </div>
      </li>
      <!-- 画笔 -->
      <li class="dropdown" data-title="画笔">
        <input type="radio" id="id-brush" class="hide" name="tool">
        <label for="id-brush" class="dropbtn">
          <i class="fas fa-pencil-alt fa-2x"></i>
        </label>
        <div class="dropdown-content">
          <form>
            <div class="dropdown-content-item">
              <label>画笔粗细</label>
              <input type="range" min="1" max="10" value="1" name="line-width"></input>
              <span id="line-width">10</span>
            </div>
          </form>
        </div>
      </li>
    <!-- 文字 -->
      <li class="dropdown" data-title="写字">
        <label for="id-text" class="dropbtn">
          <i class="fas fa-font fa-2x"></i>
        </label>
        <div class="dropdown-content"  for="id-text">
            <div class="dropdown-content-item">
              <label>字体大小</label>
              <input type="range" min="10" max="60" value="1" step="2" name="font-size"></input>
              <span id="font-size">1</span>
            </div>
        </div>
      </li>
      <!-- 橡皮擦 -->
      <li class="dropdown" data-title="橡皮擦">
        <input type="radio" id="id-eraser" class="hide" name="tool">
        <label for="id-eraser" class="dropbtn">
          <i class="fas fa-eraser fa-2x"></i>
        </label>
        <div class="dropdown-content">
            <div class="dropdown-content-item">
              <label>橡皮擦大小</label>
              <input type="range" min="10" max="60" value="1" step="2" name="eraser-size"></input>
              <span id="eraser-size">1</span>
            </div>
        </div>
      </li>
      <!-- 清空画布 -->
      <li class="dropdown" data-title="清空">
        <input type="radio" id="id-clear" class="hide" name="tool">
        <label for="id-clear" class="dropbtn">
          <i class="fas fa-trash-alt fa-2x"></i>
        </label>
      </li>
      <!-- 撤销 -->
      <li class="dropdown" data-title="清空">
        <input type="button" id="id-undo" class="hide">
        <label for="id-undo" class="dropbtn">
          <i class="fas fa-reply fa-2x"></i>
        </label>
      </li>
      <!-- 恢复 -->
      <li class="dropdown" data-title="清空">
        <input type="button" id="id-recover" class="hide">
        <label for="id-recover" class="dropbtn">
          <i class="fas fa-share fa-2x"></i>
        </label>
      </li>
      <!-- 邀请其他人 -->
      <li class="dropdown modal" data-title="邀请其他人">
        <input type="radio" id="id-invite-btn" class="hide" name="tool">
        <label for="id-invite-btn" class="dropbtn">
          <i class="fas fa-user-plus  fa-2x"></i>
        </label>
        <div class="modal-overlay">
          <div class="modal-wrap">
            <input type="radio" id="id-close-modal" class="hide" name="tool">
            <label for="id-close-modal" class="close">
                <i class="fas fa-times"></i>
            </label>
            <div class="modal-wrap-content">
              <input id="id-modal-content" type="text" value="some url" disabled>
              <input type="button" id="id-copy" class="hide">
              <label for="id-copy">
                <i class="fas fa-copy fa-lg"></i>
              </label>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <textarea id="id-textarea" autofocus class="hide"></textarea>
</body>
<script src="./wsClient.js"></script>
<script src="./scripts/board.js"></script>
<script src="./scripts/tools/textarea.js"></script>
<script src="./scripts/tools/pen.js"></script>
<script src="./scripts/tools/eraser.js"></script>
<script src="./scripts/tools/colorManager.js"></script>
<script src="./scripts/drawhistory.js"></script>
<script src="./scripts/utilitys.js"></script>
<script>
var _main = function() {
  var wsClient = new WSClient(window.location.pathname.slice(1))
  var board = new Board(wsClient)

  //需要添加crosshair样式
  // addListener(textareaElem, 'click', event => {
  //   if(event.target.checked === true) {
  //     board.changeTool(textarea)
  //     board.canvas.classList.add('crosshair-cursor')
  //     return
  //   }
  //   board.canvas.classList.remove('crosshair-cursor')
  // })
  
  if(window.location.pathname.slice(1).length > 0) {
   board.isConnected = true
   board.changeCnctState()
  }
}
_main()
</script>
</html>